describe('Admin Dashboard', () => {
  beforeEach(() => {
    cy.loginPreset();   // üëà login ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å test
    cy.visit('/admin'); // ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ /admin
  });

  it('should render dashboard widgets and key sections', () => {
    cy.viewport(1440, 900);


    cy.visit('/admin');

    cy.contains('DevOps Apartment').should('be.visible');

    // Sidebar 
    [
      '‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î',
      '‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á',
      '‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏ä‡πà‡∏≤',
      '‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤',
      '‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÄ‡∏ä‡πà‡∏≤',
      '‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ',
      '‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô',
      '‡∏ô‡πâ‡∏≥-‡πÑ‡∏ü',
      '‡∏ã‡πà‡∏≠‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á',
      '‡∏Ñ‡∏•‡∏±‡∏á',
      '‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô',
    ].forEach(txt => cy.contains(txt).should('be.visible'));

    // cards widgets 
    cy.contains('‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î').should('be.visible');
    cy.contains('‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤').should('be.visible');
    cy.contains('‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞').should('be.visible');
    cy.contains('‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà').should('be.visible');

    // ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏´‡πâ‡∏≠‡∏á
    cy.contains('‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏´‡πâ‡∏≠‡∏á').should('be.visible');
    cy.contains('‡∏ä‡∏±‡πâ‡∏ô 1').should('be.visible');
    cy.contains('‡∏ä‡∏±‡πâ‡∏ô 2').should('be.visible');
    // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ badge/‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á
    ;['101', '104', '112', '201'].forEach(room => {
      cy.contains(room).should('be.visible');
    });

    // ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå progress
    cy.contains('‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å').should('be.visible');
    // ‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏û‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á 29% (‡∏ñ‡πâ‡∏≤‡∏Ñ‡πà‡∏≤ dynamic ‡πÉ‡∏´‡πâ‡∏ú‡πà‡∏≠‡∏ô‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå)
    //  ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏î‡πâ ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° backend ‡πÄ‡∏ä‡πá‡∏Ñ‡πÅ‡∏ö‡∏ö flexible
    cy.get('body').then($b => {
      const hasExact = $b.text().includes('29%');
      if (hasExact) cy.contains('29%').should('be.visible');
      else cy.contains(/\d+%/).should('be.visible'); // percent format
    });

    // ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ (‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡∏ö‡∏≤‡∏ó‡πÅ‡∏™‡∏î‡∏á)
    cy.contains('‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ').should('be.visible');
    cy.contains(/‡∏ø?\s?\d/).should('be.visible'); //‡πÄ‡∏•‡∏Ç‡πÄ‡∏á‡∏¥‡∏ô

    // ‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á 
    cy.contains('‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á').should('be.visible');
    // ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ‡∏´‡πâ‡∏≠‡∏á
    // status ‡∏õ‡∏¥‡∏î ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£
    cy.contains(/‡∏´‡πâ‡∏≠‡∏á\s?\d+/).should('be.visible');
    cy.get('body').then($b => {
      if ($b.text().includes('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£')) {
        cy.contains('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£').should('be.visible');
      }
      if ($b.text().includes('‡∏õ‡∏¥‡∏î')) {
        cy.contains('‡∏õ‡∏¥‡∏î').should('be.visible');
      }
    });

    // ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞ 
    cy.contains('‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞').should('be.visible');
    cy.contains('‡∏Ñ‡πâ‡∏≤‡∏á').should('be.visible');
    // flexible check ‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á
    cy.contains(/‡∏´‡πâ‡∏≠‡∏á\s?\d+/).should('be.visible');


  });
});